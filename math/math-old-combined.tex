\newcommand{\powerset}[1]{\mathbb{P}(#1)}

\newcommand{\effectedExpression}[0]{ \sum_{N_t \in P} Q(\{1\},N_t) \land \lnot Q(\{\},N_t) }
\newcommand{\affectDenomExpression}[0]{ 2^{n-1} }
\newcommand{\requireDenomExpression}[0]{ \sum_{N_t \in P} Q(\{a\},N_t) }
\newcommand{\influenceDenomExpression}[0]{ \sum_{N_t \in P} \lnot Q(\{\},N_t) }


\textbf{General Quorum:}\\\par
$Q(N_t) \Rightarrow \{0,1\}$ is a general (potentially nested) QuorumSet

\begin{itemize}
  \item $N$ is the set of all nodes referenced by QuorumSet
  \item $n$ is the cardinality of $N$
  \item $N_t$ is the set of all $true$ nodes
\end{itemize}

For Convenience:
\begin{equation}
    Q(A_t,N_t-A_t) = Q(A_t \cap (N_t-A_t))
\end{equation}
\begin{itemize}
  \item $A$ is the set $\{a\}$ where $a \in N$
  \item $A_t$ set of true nodes in $A$ aka if $a$ is $true$ then $\{a\}$ else $\{\}$
\end{itemize}

Let:
\begin{itemize}
  \item $\powerset{N}$ aka the power set of $N$, has cardinality $2^n$
  \item let $P = \powerset{N-A}$ aka the power set of $N-A$, has cardinality $2^{n-1}$
\end{itemize}





\leavevmode
\par
\textbf{Effected:}
\begin{equation}
    Effected(a,Q) = \effectedExpression{}
\end{equation}

\textbf{Affect:}
\begin{align}
\begin{split}
    Affect(a,Q) &= \frac{Effected(a,Q)}{\affectDenomExpression{}} \\
\\
                &= \frac{\effectedExpression{}}{\affectDenomExpression{}}
\end{split}
\end{align}

\textbf{Require:}
\begin{align}
\begin{split}
    Require(a,Q) &= \frac{Effected(a,Q)}{\requireDenomExpression{}} \\
\\
                 &= \frac{\effectedExpression{}}{\requireDenomExpression{}}
\end{split}
\end{align}

\textbf{Influence:}
\begin{align}
\begin{split}
    Influence(a,Q) &= \frac{Effected(a,Q)}{\influenceDenomExpression{}} \\
\\
                   &= \frac{\effectedExpression{}}{\influenceDenomExpression{}}
\end{split}
\end{align}
\\



\newcommand{\effectedCombinationsExpression}[0]{ \binom{n-1}{r-1} }

\leavevmode
\\
\par
\textbf{Simple Quorum:}\\\par
$Q_{simple}(r,n,n_t)$ is a QuorumSet that does not contain inner quorum sets:
\begin{itemize}
  \item $r$ is threshold for $Q_{simple}$ to be true
  \item $n$ is number of nodes referenced by QuorumSet
  \item $n_t$ is the number of nodes that are $true$
\end{itemize}
\begin{equation}
    Q_{simple}(r,n,n_t) = (n_t>=r)
\end{equation}
\\

Then the following metrics can be computed directly:
\begin{equation}
	Affect(a,Q_{simple}(r,n,n_t)) = \frac{ \effectedCombinationsExpression{} }{ \affectDenomExpression{} }
\end{equation}
\begin{equation}
	Required(a,Q_{simple}(r,n,n_t)) = \frac{ \effectedCombinationsExpression{} }{ \sum_{i=(r-1)}^{n-1} \binom{n-1}{i} }
\end{equation}
\begin{equation}
	Influence(a,Q_{simple}(r,n,n_t)) = \frac{ \effectedCombinationsExpression{} }{ \sum_{i=0}^{r-1} \binom{n-1}{i} }
\end{equation}
